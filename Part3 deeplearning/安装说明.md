# Part3 依赖安装说明

## 1. 基本安装

```bash
pip install -r requirements.txt
```

## 2. 常见问题及解决方案

### 2.1 TensorFlow 安装问题

在 Windows 平台上，可能会遇到 TensorFlow 安装失败的问题。这是因为某些 Python 版本没有预编译的 TensorFlow 包。

#### 解决方案：

1. **使用 CPU 版本**：
```bash
pip install tensorflow-cpu
```

2. **使用 conda 安装**：
```bash
conda install tensorflow
```

3. **降级 Python 版本**：
确保使用支持 TensorFlow 的 Python 版本（通常是 3.7-3.11）

4. **使用 Microsoft 的 TensorFlow 扩展**（仅限 Windows）：
```bash
pip install tensorflow-directml-plugin
```

注意：使用 Microsoft TensorFlow 扩展时，代码中的 import 语句不需要更改，仍然使用：
```python
import tensorflow as tf
```
但需要额外导入 DirectML 插件：
```python
import tensorflow as tf
import tensorflow_directml_plugin  # 仅在使用DirectML时需要
```

### 2.2 PyTorch 安装问题

如果 PyTorch 安装失败，可以访问 [PyTorch官网](https://pytorch.org/get-started/locally/) 获取适合你系统的安装命令。

对于 Windows 用户，推荐命令：
```bash
pip install torch torchvision torchaudio --index-url https://download.pytorch.org/whl/cu118
```

### 2.3 spaCy 模型安装

安装完 spaCy 后，还需要安装语言模型：

```bash
python -m spacy download en_core_web_sm
```

## 3. 可选依赖安装

如果你需要使用深度学习模型，建议安装完整的深度学习环境：

```bash
# 安装CPU版本的TensorFlow
pip install tensorflow-cpu

# 或者安装GPU版本（需要CUDA支持）
pip install tensorflow[and-cuda]
```

## 4. 虚拟环境推荐

为了避免依赖冲突，建议使用虚拟环境：

```bash
# 创建虚拟环境
python -m venv part3_env

# 激活虚拟环境
# Windows:
part3_env\Scripts\activate
# Linux/Mac:
# source part3_env/bin/activate

# 安装依赖
pip install -r requirements.txt
```

## 5. 验证安装

安装完成后，可以通过以下命令验证：

```bash
python -c "import sklearn, xgboost, lightgbm, torch, nltk, requests; print('基本依赖安装成功')"
```

如果安装了TensorFlow，可以验证：

```bash
python -c "import tensorflow as tf; print('TensorFlow版本:', tf.__version__)"
```

## 6. 按需安装

如果你暂时只需要使用传统机器学习模型（如随机森林、XGBoost等），可以只安装必要依赖：

```bash
pip install scikit-learn xgboost lightgbm pandas numpy matplotlib seaborn requests httpx pyyaml
```

深度学习相关的依赖（tensorflow, torch, keras, transformers, spacy）可以在需要时再安装。

## 7. 代码兼容性说明

无论使用哪种方式安装 TensorFlow，代码中的 import 语句都不需要更改：
```python
import tensorflow as tf
```

Microsoft 的 TensorFlow DirectML 扩展只是为 TensorFlow 提供了一个新的计算后端，不会影响代码的编写方式。只有在需要明确使用 DirectML 后端时，才需要额外导入：
```python
import tensorflow_directml_plugin
```

这样设计的好处是代码具有很好的可移植性，可以在不同的 TensorFlow 实现之间切换而无需修改代码逻辑。